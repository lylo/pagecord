<div class="space-y-6">
  <div class="flex justify-between items-center">
    <h1 class="text-2xl font-bold">Your blogs</h1>
    <% limit = Current.user.subscribed? ? Blog::MAX_BLOGS_PAID : Blog::MAX_BLOGS_FREE %>
    <% if @blogs.count < limit %>
      <%= link_to "New blog", new_app_blog_path, class: "btn-primary text-sm" %>
    <% end %>
  </div>

  <div class="space-y-3">
    <% @blogs.each do |blog| %>
      <div class="flex items-center justify-between p-4 border rounded-lg <%= blog.id == @blog.id ? 'border-[#4fbd9c]/40 bg-[#4fbd9c]/5 dark:border-[#4fbd9c]/30 dark:bg-[#4fbd9c]/10' : 'border-slate-200 dark:border-slate-700' %>">
        <div class="flex items-center gap-3">
          <%= render "app/shared/blog_avatar", blog: blog, size: "md" %>
          <div>
            <div class="font-medium"><%= blog.display_name %></div>
            <div class="text-sm text-slate-500"><%= blog.subdomain %>.pagecord.com Â· <%= pluralize(blog.posts.count, "post") %></div>
          </div>
        </div>

        <% if @blogs.count > 1 %>
          <%= button_to app_blog_path(blog), method: :delete,
              class: "btn-danger",
              data: { turbo_confirm: "Are you sure you want to delete #{blog.display_name}? This can't be undone." } do %>
            Delete
          <% end %>
        <% end %>
      </div>
    <% end %>
  </div>

  <% unless Current.user.subscribed? %>
    <p class="text-sm text-slate-500">
      <%= link_to "Upgrade to Pagecord Premium", app_settings_subscriptions_path, class: "underline font-medium" %> to create up to <%= Blog::MAX_BLOGS_PAID %> blogs.
    </p>
  <% end %>
</div>

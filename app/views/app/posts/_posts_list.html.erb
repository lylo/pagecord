<% if @drafts.any? %>
  <div class="mb-8" id="draft_posts">
    <div class="text-lg font-semibold mb-4 text-slate-900 dark:text-slate-100">
      üñãÔ∏è Drafts
    </div>

    <% show_draft_years = @drafts.any? { |p| (p.published_at || p.updated_at).year != Time.current.year } %>
    <% previous_year = nil %>
    <% @drafts.each do |post| %>
      <% draft_year = (post.published_at || post.updated_at).year %>
      <% if show_draft_years && draft_year != previous_year %>
        <div class="text-lg font-semibold mb-4 text-slate-900 dark:text-slate-100 <%= 'mt-8' unless previous_year.nil? %>">
          <%= draft_year %>
        </div>
        <% previous_year = draft_year %>
      <% end %>
      <%= render "post", post: post %>
    <% end %>

    <div class="w-1/2 mx-auto border-b border-slate-200 dark:border-slate-700 my-8"></div>
  </div>
<% end %>

<% if @search_term.present? && @posts.empty? && @drafts.empty? %>
  <div class="text-center">
    <p>
      No posts found for "<%= @search_term %>"
    </p>
  </div>
<% else %>
  <% previous_year = nil %>
  <% @posts.each do |post| %>
    <% if post.published_at.year != previous_year %>
      <div class="text-lg font-semibold mb-4 text-slate-900 dark:text-slate-100 <%= 'mt-8' unless previous_year.nil? %>">
        <%= post.published_at.year %>

        <% previous_year = post.published_at.year %>
      </div>
    <% end %>

    <%= render "post", post: post %>
  <% end %>
<% end %>